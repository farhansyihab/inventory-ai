Session 2.2 Test Log - Jum 26 Sep 2025 09:59:38 WIB
=================================
Creating MongoDB indexes...
✅ User indexes created successfully
Indexes: [
    {
        "username": 1
    },
    {
        "email": 1
    },
    {
        "role": 1
    },
    {
        "createdAt": 1
    }
]
✅ All indexes created successfully!
[2025-09-26 09:59:38] Starting unit tests: tests/Unit/Service/CategoryServiceTest.php
PHPUnit 9.6.27 by Sebastian Bergmann and contributors.

Runtime:       PHP 8.4.12
Configuration: /var/www/html/inventory-ai/tests/phpunit.xml
Random Seed:   1758855578
Warning:       No code coverage driver available

Category Service (Tests\Unit\Service\CategoryService)
 ✘ Find by id with valid id [9.26 ms]
   │
   │ Error: Call to undefined method MongoDB\BSON\ObjectId::isValid()
   │
   │ /var/www/html/inventory-ai/src/Service/CategoryService.php:34
   │ /var/www/html/inventory-ai/tests/Unit/Service/CategoryServiceTest.php:42
   │

 ✘ Find by id with invalid id [0.17 ms]
   │
   │ Failed asserting that exception of type "Error" matches expected exception "Exception". Message was: "Call to undefined method MongoDB\BSON\ObjectId::isValid()" at
   │ /var/www/html/inventory-ai/src/Service/CategoryService.php:34
   │ /var/www/html/inventory-ai/tests/Unit/Service/CategoryServiceTest.php:52
   │ .
   │

 ✘ Create category successfully [0.26 ms]
   │
   │ Error: Call to undefined method MongoDB\BSON\ObjectId::isValid()
   │
   │ /var/www/html/inventory-ai/src/Service/CategoryService.php:34
   │ /var/www/html/inventory-ai/src/Service/CategoryService.php:123
   │ /var/www/html/inventory-ai/tests/Unit/Service/CategoryServiceTest.php:76
   │

 ✔ Create category with existing slug [0.39 ms]
 ✘ Update category successfully [0.21 ms]
   │
   │ Error: Call to undefined method MongoDB\BSON\ObjectId::isValid()
   │
   │ /var/www/html/inventory-ai/src/Service/CategoryService.php:141
   │ /var/www/html/inventory-ai/tests/Unit/Service/CategoryServiceTest.php:112
   │

 ✘ Delete category successfully [0.12 ms]
   │
   │ Error: Call to undefined method MongoDB\BSON\ObjectId::isValid()
   │
   │ /var/www/html/inventory-ai/src/Service/CategoryService.php:215
   │ /var/www/html/inventory-ai/tests/Unit/Service/CategoryServiceTest.php:133
   │

 ✘ Delete category with subcategories [0.50 ms]
   │
   │ Failed asserting that exception of type "Error" matches expected exception "Exception". Message was: "Call to undefined method MongoDB\BSON\ObjectId::isValid()" at
   │ /var/www/html/inventory-ai/src/Service/CategoryService.php:215
   │ /var/www/html/inventory-ai/tests/Unit/Service/CategoryServiceTest.php:153
   │ .
   │

 ✔ Get category tree [0.19 ms]
 ✘ Get subcategories [0.12 ms]
   │
   │ Error: Call to undefined method MongoDB\BSON\ObjectId::isValid()
   │
   │ /var/www/html/inventory-ai/src/Service/CategoryService.php:323
   │ /var/www/html/inventory-ai/tests/Unit/Service/CategoryServiceTest.php:191
   │

 ✔ Validate category data [0.27 ms]
 ✘ Bulk update status [0.08 ms]
   │
   │ Error: Call to undefined method MongoDB\BSON\ObjectId::isValid()
   │
   │ /var/www/html/inventory-ai/src/Service/CategoryService.php:531
   │ /var/www/html/inventory-ai/tests/Unit/Service/CategoryServiceTest.php:217
   │

 ✔ Get category statistics [0.13 ms]
 ✔ Slug exists [0.34 ms]
 ✘ Category exists [0.07 ms]
   │
   │ Error: Call to undefined method MongoDB\BSON\ObjectId::isValid()
   │
   │ /var/www/html/inventory-ai/src/Service/CategoryService.php:611
   │ /var/www/html/inventory-ai/tests/Unit/Service/CategoryServiceTest.php:266
   │

Time: 00:00.023, Memory: 8.00 MB

Summary of non-successful tests:

Category Service (Tests\Unit\Service\CategoryService)
 ✘ Find by id with valid id [9.26 ms]
   │
   │ Error: Call to undefined method MongoDB\BSON\ObjectId::isValid()
   │
   │ /var/www/html/inventory-ai/src/Service/CategoryService.php:34
   │ /var/www/html/inventory-ai/tests/Unit/Service/CategoryServiceTest.php:42
   │

 ✘ Delete category with subcategories [0.50 ms]
   │
   │ Failed asserting that exception of type "Error" matches expected exception "Exception". Message was: "Call to undefined method MongoDB\BSON\ObjectId::isValid()" at
   │ /var/www/html/inventory-ai/src/Service/CategoryService.php:215
   │ /var/www/html/inventory-ai/tests/Unit/Service/CategoryServiceTest.php:153
   │ .
   │

 ✘ Get subcategories [0.12 ms]
   │
   │ Error: Call to undefined method MongoDB\BSON\ObjectId::isValid()
   │
   │ /var/www/html/inventory-ai/src/Service/CategoryService.php:323
   │ /var/www/html/inventory-ai/tests/Unit/Service/CategoryServiceTest.php:191
   │

 ✘ Delete category successfully [0.12 ms]
   │
   │ Error: Call to undefined method MongoDB\BSON\ObjectId::isValid()
   │
   │ /var/www/html/inventory-ai/src/Service/CategoryService.php:215
   │ /var/www/html/inventory-ai/tests/Unit/Service/CategoryServiceTest.php:133
   │

 ✘ Create category successfully [0.26 ms]
   │
   │ Error: Call to undefined method MongoDB\BSON\ObjectId::isValid()
   │
   │ /var/www/html/inventory-ai/src/Service/CategoryService.php:34
   │ /var/www/html/inventory-ai/src/Service/CategoryService.php:123
   │ /var/www/html/inventory-ai/tests/Unit/Service/CategoryServiceTest.php:76
   │

 ✘ Find by id with invalid id [0.17 ms]
   │
   │ Failed asserting that exception of type "Error" matches expected exception "Exception". Message was: "Call to undefined method MongoDB\BSON\ObjectId::isValid()" at
   │ /var/www/html/inventory-ai/src/Service/CategoryService.php:34
   │ /var/www/html/inventory-ai/tests/Unit/Service/CategoryServiceTest.php:52
   │ .
   │

 ✘ Update category successfully [0.21 ms]
   │
   │ Error: Call to undefined method MongoDB\BSON\ObjectId::isValid()
   │
   │ /var/www/html/inventory-ai/src/Service/CategoryService.php:141
   │ /var/www/html/inventory-ai/tests/Unit/Service/CategoryServiceTest.php:112
   │

 ✘ Bulk update status [0.08 ms]
   │
   │ Error: Call to undefined method MongoDB\BSON\ObjectId::isValid()
   │
   │ /var/www/html/inventory-ai/src/Service/CategoryService.php:531
   │ /var/www/html/inventory-ai/tests/Unit/Service/CategoryServiceTest.php:217
   │

 ✘ Category exists [0.07 ms]
   │
   │ Error: Call to undefined method MongoDB\BSON\ObjectId::isValid()
   │
   │ /var/www/html/inventory-ai/src/Service/CategoryService.php:611
   │ /var/www/html/inventory-ai/tests/Unit/Service/CategoryServiceTest.php:266
   │

ERRORS!
Tests: 14, Assertions: 9, Errors: 7, Failures: 2.
